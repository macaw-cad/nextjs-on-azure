{"ast":null,"code":"import _defineProperty from \"D:/projects/jss/nextjsonazure/packages/jss-nextjs-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\projects\\\\jss\\\\nextjsonazure\\\\packages\\\\jss-nextjs-app\\\\src\\\\pages\\\\[[...path]].tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useEffect } from 'react';\nimport NotFound from 'src/NotFound';\nimport Layout from 'src/Layout';\nimport { SitecoreContext, ComponentPropsContext, handleExperienceEditorFastRefresh } from '@sitecore-jss/sitecore-jss-nextjs';\nimport { componentFactory } from 'temp/componentFactory';\n\nvar SitecorePage = function SitecorePage(_ref) {\n  _s();\n\n  var _layoutData$sitecore, _layoutData$sitecore$;\n\n  var notFound = _ref.notFound,\n      layoutData = _ref.layoutData,\n      componentProps = _ref.componentProps;\n  useEffect(function () {\n    // Since Experience Editor does not support Fast Refresh need to refresh EE chromes after Fast Refresh finished\n    handleExperienceEditorFastRefresh();\n  }, []);\n\n  if (notFound || !(layoutData === null || layoutData === void 0 ? void 0 : (_layoutData$sitecore = layoutData.sitecore) === null || _layoutData$sitecore === void 0 ? void 0 : _layoutData$sitecore.route)) {\n    // Shouldn't hit this (as long as 'notFound' is being returned below), but just to be safe\n    return /*#__PURE__*/_jsxDEV(NotFound, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var context = _objectSpread({\n    route: layoutData.sitecore.route,\n    itemId: (_layoutData$sitecore$ = layoutData.sitecore.route) === null || _layoutData$sitecore$ === void 0 ? void 0 : _layoutData$sitecore$.itemId\n  }, layoutData.sitecore.context);\n\n  return /*#__PURE__*/_jsxDEV(ComponentPropsContext, {\n    value: componentProps,\n    children: /*#__PURE__*/_jsxDEV(SitecoreContext, {\n      componentFactory: componentFactory,\n      context: context,\n      children: /*#__PURE__*/_jsxDEV(Layout, {\n        context: context\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, _this);\n}; // This function gets called at build and export time to determine\n// pages for SSG (\"paths\", as tokenized array).\n\n\n_s(SitecorePage, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = SitecorePage;\nexport var __N_SSG = true;\nexport default SitecorePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SitecorePage\");","map":{"version":3,"sources":["D:/projects/jss/nextjsonazure/packages/jss-nextjs-app/src/pages/[[...path]].tsx"],"names":["useEffect","NotFound","Layout","SitecoreContext","ComponentPropsContext","handleExperienceEditorFastRefresh","componentFactory","SitecorePage","notFound","layoutData","componentProps","sitecore","route","context","itemId"],"mappings":";;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AAEA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,SACEC,eADF,EAEEC,qBAFF,EAGEC,iCAHF,QAIO,mCAJP;AAQA,SAASC,gBAAT,QAAiC,uBAAjC;;AAGA,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAA8E;AAAA;;AAAA;;AAAA,MAA3EC,QAA2E,QAA3EA,QAA2E;AAAA,MAAjEC,UAAiE,QAAjEA,UAAiE;AAAA,MAArDC,cAAqD,QAArDA,cAAqD;AACjGV,EAAAA,SAAS,CAAC,YAAM;AACd;AACAK,IAAAA,iCAAiC;AAClC,GAHQ,EAGN,EAHM,CAAT;;AAKA,MAAIG,QAAQ,IAAI,EAACC,UAAD,aAACA,UAAD,+CAACA,UAAU,CAAEE,QAAb,yDAAC,qBAAsBC,KAAvB,CAAhB,EAA8C;AAC5C;AACA,wBAAO,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,aAAP;AACD;;AAED,MAAMC,OAAuC;AAC3CD,IAAAA,KAAK,EAAEH,UAAU,CAACE,QAAX,CAAoBC,KADgB;AAE3CE,IAAAA,MAAM,2BAAEL,UAAU,CAACE,QAAX,CAAoBC,KAAtB,0DAAE,sBAA2BE;AAFQ,KAGxCL,UAAU,CAACE,QAAX,CAAoBE,OAHoB,CAA7C;;AAMA,sBACE,QAAC,qBAAD;AAAuB,IAAA,KAAK,EAAEH,cAA9B;AAAA,2BACE,QAAC,eAAD;AACE,MAAA,gBAAgB,EAAEJ,gBADpB;AAEE,MAAA,OAAO,EAAEO,OAFX;AAAA,6BAIE,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAEA;AAAjB;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,WADF;AAUD,CA3BD,C,CA6BA;AACA;;;GA9BMN,Y;;KAAAA,Y;;AAyEN,eAAeA,YAAf","sourcesContent":["import { useEffect } from 'react';\r\nimport { GetStaticPaths, GetStaticProps } from 'next';\r\nimport NotFound from 'src/NotFound';\r\nimport Layout from 'src/Layout';\r\nimport {\r\n  SitecoreContext,\r\n  ComponentPropsContext,\r\n  handleExperienceEditorFastRefresh,\r\n} from '@sitecore-jss/sitecore-jss-nextjs';\r\nimport { StyleguideSitecoreContextValue } from 'lib/component-props';\r\nimport { SitecorePageProps } from 'lib/page-props';\r\nimport { sitecorePagePropsFactory } from 'lib/page-props-factory';\r\nimport { componentFactory } from 'temp/componentFactory';\r\nimport { sitemapFetcher } from 'lib/sitemap-fetcher';\r\n\r\nconst SitecorePage = ({ notFound, layoutData, componentProps }: SitecorePageProps): JSX.Element => {\r\n  useEffect(() => {\r\n    // Since Experience Editor does not support Fast Refresh need to refresh EE chromes after Fast Refresh finished\r\n    handleExperienceEditorFastRefresh();\r\n  }, []);\r\n\r\n  if (notFound || !layoutData?.sitecore?.route) {\r\n    // Shouldn't hit this (as long as 'notFound' is being returned below), but just to be safe\r\n    return <NotFound />;\r\n  }\r\n\r\n  const context: StyleguideSitecoreContextValue = {\r\n    route: layoutData.sitecore.route,\r\n    itemId: layoutData.sitecore.route?.itemId,\r\n    ...layoutData.sitecore.context,\r\n  };\r\n\r\n  return (\r\n    <ComponentPropsContext value={componentProps}>\r\n      <SitecoreContext<StyleguideSitecoreContextValue>\r\n        componentFactory={componentFactory}\r\n        context={context}\r\n      >\r\n        <Layout context={context} />\r\n      </SitecoreContext>\r\n    </ComponentPropsContext>\r\n  );\r\n};\r\n\r\n// This function gets called at build and export time to determine\r\n// pages for SSG (\"paths\", as tokenized array).\r\nexport const getStaticPaths: GetStaticPaths = async (context) => {\r\n  // Fallback, along with revalidate in getStaticProps (below),\r\n  // enables Incremental Static Regeneration. This allows us to\r\n  // leave certain (or all) paths empty if desired and static pages\r\n  // will be generated on request (development mode in this example).\r\n  // Alternatively, the entire sitemap could be pre-rendered\r\n  // ahead of time (non-development mode in this example).\r\n  // See https://nextjs.org/docs/basic-features/data-fetching#incremental-static-regeneration\r\n\r\n  if (process.env.NODE_ENV !== 'development') {\r\n    // Note: Next.js runs export in production mode\r\n    const paths = await sitemapFetcher.fetch(context);\r\n\r\n    return {\r\n      paths,\r\n      fallback: process.env.EXPORT_MODE ? false : 'blocking',\r\n    };\r\n  }\r\n\r\n  return {\r\n    paths: [],\r\n    fallback: 'blocking',\r\n  };\r\n};\r\n\r\n// This function gets called at build time on server-side.\r\n// It may be called again, on a serverless function, if\r\n// revalidation (or fallback) is enabled and a new request comes in.\r\nexport const getStaticProps: GetStaticProps = async (context) => {\r\n  console.error(\"context\", context);\r\n  const props = await sitecorePagePropsFactory.create(context);\r\n\r\n  return {\r\n    props,\r\n    // Next.js will attempt to re-generate the page:\r\n    // - When a request comes in\r\n    // - At most once every 5 seconds\r\n    revalidate: 5, // In seconds\r\n    notFound: props.notFound, // Returns custom 404 page with a status code of 404 when true\r\n  };\r\n};\r\n\r\nexport default SitecorePage;\r\n"]},"metadata":{},"sourceType":"module"}